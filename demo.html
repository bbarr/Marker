<!DOCTYPE html>
<html>
<head>
</head>
<body>
	
	<script src="marker.js"></script>
	<script>
	
	Marker.register('test', function(data) {
    this
      .div()
        .when(data.name)
          .h3(data.name).end()
        .end()
        .p(data.content);
  });

  var rendered = Marker.render('test', { name: 'bbarr', content: 'blah' });
  console.log(rendered);
		
		Marker.register('short_example', function(link_href, link_text) {
			
			this
			  .div()
				  .p('Some paragraph.')
					  .when(true)
              .when(false)
                .p('nested when').end()
              .end()
					    .a({ href: link_href, cache: 'the_link' }, 'when is true').end()
					  .end();
					  
		});
		
		var rendered = Marker.render('short_example', 'http://jomamma.com', 'jomamma');
		
		rendered.html; // =>the generated HTML
		rendered.cache; // => hash of cached elements
	  rendered.cache.the_link; // => references the above generated anchor

		document.body.appendChild(rendered.html);	

		Marker.register('long_example', function(data) {

			this
			  .div()
				  .h3('a header').end()
				  .div({ className: 'inner' })
					  .p()
						  .text('some paragraph text ')
						  .a({ href: '#' }, 'a link').end()
						  .text('some more text')
						.end()
				  .end()
				.end()
				
				.partial('short_example', data.a, data.b)
				
				.section()
					.span(data.foo);
		});

		//document.body.appendChild(Marker.render('long_example', { foo: 'bar', a: 'a variable', b: 'b variable' }).html);

	</script>
</body>
</html>